<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Thenaterweb: DataAccessLayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Thenaterweb
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classDataAccessLayer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DataAccessLayer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a20b39ae7eb19a2dd4048932f37fdee9b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#a20b39ae7eb19a2dd4048932f37fdee9b">registerModel</a> ($modelName, $createTable=True)</td></tr>
<tr class="separator:a20b39ae7eb19a2dd4048932f37fdee9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae71afc8b728e6db696eab8b81c9043d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#ae71afc8b728e6db696eab8b81c9043d7">registerModelFromInstance</a> ($instance, $createTable=True)</td></tr>
<tr class="separator:ae71afc8b728e6db696eab8b81c9043d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30555ff6bb6936e13b152fdae3aebd3d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#a30555ff6bb6936e13b152fdae3aebd3d">getAll</a> ($modelName)</td></tr>
<tr class="separator:a30555ff6bb6936e13b152fdae3aebd3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff8cf1f209e9d1a3b7f5c007640bb81a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#aff8cf1f209e9d1a3b7f5c007640bb81a">get</a> ($modelName, $by, $value, $genericClass=False)</td></tr>
<tr class="separator:aff8cf1f209e9d1a3b7f5c007640bb81a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c8849ee005e0dcc6ffc6a33709db4ee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#a8c8849ee005e0dcc6ffc6a33709db4ee">getAttributeValues</a> ($modelName, $attrName)</td></tr>
<tr class="separator:a8c8849ee005e0dcc6ffc6a33709db4ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7909fa3cca801baa35ae6f06c02ee4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#a9e7909fa3cca801baa35ae6f06c02ee4">filter</a> ($modelName, $criteria, $genericClass=False)</td></tr>
<tr class="separator:a9e7909fa3cca801baa35ae6f06c02ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71f6b38eecd06b7ca6190292b4a2bcd7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#a71f6b38eecd06b7ca6190292b4a2bcd7">search</a> ($modelName, $criteria)</td></tr>
<tr class="separator:a71f6b38eecd06b7ca6190292b4a2bcd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b2a05cb91ef6eaa39e876c237baa805"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#a4b2a05cb91ef6eaa39e876c237baa805">createRegisteredTables</a> ()</td></tr>
<tr class="separator:a4b2a05cb91ef6eaa39e876c237baa805"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a25905efc8a7497195927f06766ae0775"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#a25905efc8a7497195927f06766ae0775">save</a> ($modelName, $object)</td></tr>
<tr class="separator:a25905efc8a7497195927f06766ae0775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ecad29c31c804341d1a211b710211b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataAccessLayer.html#aa4ecad29c31c804341d1a211b710211b">delete</a> ($modelName, $criteria)</td></tr>
<tr class="separator:aa4ecad29c31c804341d1a211b710211b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Include the database library The main data access layer for managing all database interactions. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4b2a05cb91ef6eaa39e876c237baa805"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataAccessLayer::createRegisteredTables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates tables for the models registered with the data access layer. Called automatically on registering a model if not otherwise instructed, but can also be called externally. </p>

</div>
</div>
<a class="anchor" id="aa4ecad29c31c804341d1a211b710211b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static DataAccessLayer::delete </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modelName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$criteria</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deletes a model instance from the database. This is generally not called directly, but is called from the delete method of a model instance. It can be called directly in order to handle removing objects that correspond to the data in stdClass instances. It is recommended that a model be registered with the data access layer before using this method in order to make sure the necessary database structures are in place.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$modelName</td><td>- the name of the model class </td></tr>
    <tr><td class="paramname">$criteria</td><td>- the criteria to match to delete the model from the database as an associative array of field_name=&gt;value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>- throws an exception if the model does not contain an id. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9e7909fa3cca801baa35ae6f06c02ee4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataAccessLayer::filter </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modelName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$criteria</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$genericClass</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an array of models that match a given criteria.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$modelName</td><td>- the name of the model to retrieve </td></tr>
    <tr><td class="paramname">$criteria</td><td>- an array of values corresponding to fields of the model and the values to select. </td></tr>
    <tr><td class="paramname">$genericClass</td><td>- whether to return an instance of the model class or a generic class (stdClass). True results in a generic class. The generic class does not have full functionality of a class extending from modelBase but may be useful if a model name does not correspond to an actual table. This is set to true for internally retrieving many2many and foreignkey relations.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>$objects - an array of models or stdClasses that match the given criteria. </dd></dl>

</div>
</div>
<a class="anchor" id="aff8cf1f209e9d1a3b7f5c007640bb81a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataAccessLayer::get </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modelName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$by</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$genericClass</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves a single model from the database given a criteria.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$modelName</td><td>- the name of the model class to retrieve. Must be registered with the data access layer prior to retrieval. </td></tr>
    <tr><td class="paramname">$by</td><td>- the field of the model to filter by </td></tr>
    <tr><td class="paramname">$value</td><td>- the value of the field to search for (ideally, an id or other unique value). </td></tr>
    <tr><td class="paramname">$genericClass</td><td>- whether to return an instance of the model class or a generic class (stdClass). True results in a generic class. The generic class does not have full functionality of a class extending from modelBase but may be useful if a model name does not correspond to an actual table. This is set to true for internally retrieving many2many and foreignkey relations.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an instance of the model or an stdClass </dd></dl>

</div>
</div>
<a class="anchor" id="a30555ff6bb6936e13b152fdae3aebd3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataAccessLayer::getAll </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modelName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve all of the instances of a model from the database</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$modelName</td><td>- the name of the model class to retrieve. Must already be registered with the data access layer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>$objects - an array of model instances </dd></dl>

</div>
</div>
<a class="anchor" id="a8c8849ee005e0dcc6ffc6a33709db4ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataAccessLayer::getAttributeValues </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modelName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attrName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns all of the values contained in a database column for a given table. Does not provide functionality for manipulating them, only returns an array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$modelName</td><td>- the name of the model to retrieve for </td></tr>
    <tr><td class="paramname">$attrName</td><td>- the name of the model field to retrieve values for</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array - an array of values for the field </dd></dl>

</div>
</div>
<a class="anchor" id="a20b39ae7eb19a2dd4048932f37fdee9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataAccessLayer::registerModel </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modelName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$createTable</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Registers a model with the data access layer. Will create the database tables if they do not exist and will store the model for later lookups. This function must be called for each of the models that will be used any time a new data access layer is initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$modelName</td><td>- the class name of the model </td></tr>
    <tr><td class="paramname">$createTable</td><td>- create the associated database table. Defaults to true, as the table will only be created if it does not already exist. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae71afc8b728e6db696eab8b81c9043d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataAccessLayer::registerModelFromInstance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$createTable</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Registers a new model with the data access layer from an existing instance of the model. All models must be registered with new instances of the data access layer in order to use them with the database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$instance</td><td>- the instance of the model to register </td></tr>
    <tr><td class="paramname">$createTable</td><td>- create the associated database table. Defaults to true as the table will only be created if it does not already exist. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a25905efc8a7497195927f06766ae0775"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static DataAccessLayer::save </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modelName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Saves or updates a model instance in the database. This is usually not called directly but is used instead by the modelBase class for providing the functionality of saving a model directly. It is recommended that a model be registered with the data access layer before using this method in order to make sure that the proper database structures are in place. This function can be called directly rather than using a model's save function in order to save models retrieved as stdClass instances.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$modelName</td><td>- the name of the model to save </td></tr>
    <tr><td class="paramname">$object</td><td>- an associative array of the model's contents as field_name =&gt; value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int - the object id </dd></dl>

</div>
</div>
<a class="anchor" id="a71f6b38eecd06b7ca6190292b4a2bcd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataAccessLayer::search </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modelName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$criteria</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Performs a fuzzy filter based on similarities rather than attempting to match perfectly. Not yet implemented. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>engine/classes/class_dataAccessLayer.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 9 2014 03:06:05 for Thenaterweb by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
