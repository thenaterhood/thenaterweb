<html>
    <head>
        <script
            type="text/javascript"
            src="../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php 
#error_reporting(E_ALL);
#ini_set( 'display_errors','1'); 
include_once GNAT_ROOT.'/lib/core_blog.php';
include_once GNAT_ROOT.'/lib/core_redirect.php';

$session = new session( array('name', 'track', 'konami', 'id', 'tag', 'type', 'node', 'start', 'end') );
$config = new config();
$registerExtensions = array( );
$extensions = loadExtensions( $session, $registerExtensions );

# Grab variables from the URL. Syntax for this is...
# name of variable, default value of variable, maxlength of variable
$static = $blogdef-&gt;page_directory;

$content = pullContent( array( $static.'/page_'.$session-&gt;id, $static.'/hidden_'.$session-&gt;id, GNAT_ROOT.'/lib/pages/page_'.$session-&gt;id ) );

$htmlTitle = $blogdef-&gt;title.' | '.$content-&gt;title;
$visibleTitle = $blogdef-&gt;title;

$id = $content-&gt;title;
$tagline = $blogdef-&gt;catchline;
$type = '404';

if ( $config-&gt;friendly_urls ){
        $redirect = new condRedirect( '/?url', '/'.$_GET['url'], substr( $config-&gt;site_domain, 7 ).$session-&gt;uri );
        $redirect-&gt;apply( 301 );
        $redirect = new condRedirect( &quot;?id=post&quot;, '/'.$blogdef-&gt;id.'/read/'.$session-&gt;node.'.htm', $session-&gt;uri );
        $redirect-&gt;apply( 301 );
        $redirect = new condRedirect( '/?id', &quot;page/&quot;.$session-&gt;id, substr( $config-&gt;site_domain, 7 ).$session-&gt;uri );
        $redirect-&gt;apply( 301 );
}


// Checks for cookies and sets them (or refreshes them) if necessary

setcookie('name',$session-&gt;name,time() + (86400 * 30),&quot;/&quot;,$session-&gt;domain); // 86400 = 1 day
setcookie('track',$session-&gt;track,time() + (86400 * 30),&quot;/&quot;,$session-&gt;domain); // 86400 = 1 day
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;&lt;?php print $blogdef-&gt;title .' | '. $content-&gt;title; ?&gt;&lt;/title&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;
    &lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;

    &lt;!-- CSS --&gt;
    &lt;link href=&quot;/assets/bootstrap/css/bootstrap.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;style type=&quot;text/css&quot;&gt;

      /* Sticky footer styles
      -------------------------------------------------- */

      html,
      body {
        height: 100%;
        /* The html and body elements cannot have any padding or margin. */
      }

      /* Wrapper for page content to push down footer */
      #wrap {
        min-height: 100%;
        height: auto !important;
        height: 100%;
        /* Negative indent footer by it's height */
        margin: 0 auto -60px;
      }

      /* Set the fixed height of the footer here */
      #push,
      #footer {
        height: 60px;
      }
      #footer {
        background-color: #f5f5f5;
      }

      /* Lastly, apply responsive CSS fixes as necessary */
      @media (max-width: 767px) {
        #footer {
          margin-left: -20px;
          margin-right: -20px;
          padding-left: 20px;
          padding-right: 20px;
        }
      }



      /* Custom page CSS
      -------------------------------------------------- */
      /* Not required for template or sticky footer method. */

      #wrap &gt; .container {
        padding-top: 60px;
      }
      .container .credit {
        margin: 20px 0;
      }

      code {
        font-size: 80%;
      }

    &lt;/style&gt;
    &lt;link href=&quot;/assets/bootstrap/css/bootstrap-responsive.css&quot; rel=&quot;stylesheet&quot;&gt;

    &lt;!-- HTML5 shim, for IE6-8 support of HTML5 elements --&gt;
    &lt;!--[if lt IE 9]&gt;
      &lt;script src=&quot;js/html5shiv.js&quot;&gt;&lt;/script&gt;
    &lt;![endif]--&gt;

    &lt;!-- Fav and touch icons --&gt;
    &lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;144x144&quot; href=&quot;../assets/ico/apple-touch-icon-144-precomposed.png&quot;&gt;
    &lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;114x114&quot; href=&quot;../assets/ico/apple-touch-icon-114-precomposed.png&quot;&gt;
      &lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;72x72&quot; href=&quot;../assets/ico/apple-touch-icon-72-precomposed.png&quot;&gt;
                    &lt;link rel=&quot;apple-touch-icon-precomposed&quot; href=&quot;../assets/ico/apple-touch-icon-57-precomposed.png&quot;&gt;
                                   &lt;link rel=&quot;shortcut icon&quot; href=&quot;../assets/ico/favicon.png&quot;&gt;
  &lt;/head&gt;

  &lt;body&gt;


    &lt;!-- Part 1: Wrap all page content here --&gt;
    &lt;div id=&quot;wrap&quot;&gt;

      &lt;!-- Fixed navbar --&gt;
      &lt;div class=&quot;navbar navbar-inverse navbar-fixed-top&quot;&gt;
        &lt;div class=&quot;navbar-inner&quot;&gt;
          &lt;div class=&quot;container&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn btn-navbar&quot; data-toggle=&quot;collapse&quot; data-target=&quot;.nav-collapse&quot;&gt;
              &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
              &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
              &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
            &lt;/button&gt;
            &lt;a class=&quot;brand&quot; href=&quot;/&quot;&gt;TheNaterhood&lt;/a&gt;
            &lt;div class=&quot;nav-collapse collapse&quot;&gt;
              &lt;ul class=&quot;nav&quot;&gt;
                &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;/page/about&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;/page/connect&quot;&gt;Connect&lt;/a&gt;&lt;/li&gt;  
                &lt;li&gt;&lt;a href=&quot;/page/projects&quot;&gt;Projects&lt;/a&gt;&lt;/li&gt;                              

                &lt;?php 

                        if ( file_exists( $static.'/template_dropdown.php' ) ){

                                print '&lt;li class=&quot;dropdown&quot;&gt;
                                        &lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt;'.$blogdef-&gt;id.'&lt;b class=&quot;caret&quot;&gt;&lt;/b&gt;&lt;/a&gt;
                                        &lt;ul class=&quot;dropdown-menu&quot;&gt;';
                                include $static.'/template_dropdown.php';
                                print '
          
                                &lt;/ul&gt;
                                &lt;/li&gt;
                                &lt;/ul&gt;';

                        }
                ?&gt;


            &lt;/div&gt;&lt;!--/.nav-collapse --&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;!-- Begin page content --&gt;
      &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;page-header&quot;&gt;
          &lt;h1&gt;&lt;?php print $blogdef-&gt;title; ?&gt;&lt;/h1&gt;
        &lt;/div&gt;
                                &lt;?php 

                                print getPreface( $extensions );


                                if ( ! $content-&gt;isPhp() ){
                                        print $content-&gt;toHtml();
                                }
                                else{
                                        include $content-&gt;getFile();
                                }

                                print getPost( $extensions );

                                ?&gt;
      &lt;/div&gt;

      &lt;div id=&quot;push&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;div id=&quot;footer&quot;&gt;
      &lt;div class=&quot;container&quot;&gt;
        &lt;p class=&quot;muted credit&quot;&gt;Template based on &lt;a href=&quot;http://getbootstrap.com&quot;&gt;Bootstrap&lt;/a&gt;. Copyright 2012-2013 Nate Levesque (TheNaterhood). &lt;a href=&quot;/sitemap.php&quot;&gt;View sitemap&lt;/a&gt;.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;



    &lt;!-- Le javascript
    ================================================== --&gt;
    &lt;!-- Placed at the end of the document so the pages load faster --&gt;
    &lt;script src=&quot;http://code.jquery.com/jquery.js&quot;&gt;&lt;/script&gt;

    &lt;script src=&quot;/assets/bootstrap/js/bootstrap.js&quot;&gt;&lt;/script&gt;

  &lt;/body&gt;
&lt;/html&gt;

</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all()
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>