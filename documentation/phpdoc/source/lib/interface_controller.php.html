<html>
    <head>
        <script
            type="text/javascript"
            src="../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php 

include_once GNAT_ROOT.'/lib/core_blog.php';

abstract class controllerBase{

	protected $settings;
	protected $configuration;

	/**
	 * Returns a map containing all of the controller 
	 * settings.
	 *
	 * @return a map of the class settings
	 */
	public function getConfigurables(){
		return $this-&gt;settings;
	}

	/**
	 * Reads an XML configuration file and sets the 
	 * class settings field
	 * 
	 * @param $path - the path to the config file
	 */
	public function readConfig( $path ){

		$confFile = $path;
	    $conf = array();
	    $conf['title'] = &quot;Error&quot;;
	    $conf['catchline'] = &quot;&quot;;
	    $conf['commentCode'] = &quot;&quot;;
	    
	    
	    if ( file_exists($confFile) ){
	            $xml = simplexml_load_file( $path );
	            $conf = xmltoArray( $xml ); 
	            
	            
	    }

	    $this-&gt;settings = (array) arrayToObject($conf);
	    $this-&gt;settings['configFile'] = $path;

	    if ( !array_key_exists( 'template', $this-&gt;settings ) )
	    	$this-&gt;settings['template'] = GNAT_ROOT.'/config/template.d/generic_template.php';

	}


	/**
	 * Saves an xml configuration file. This is untested!
	 *
	 * @param $path - the path to the file to save
	 */
	public function saveConfig( $path ){

		$confFile = fopen( $path, 'w' );

		$xml = new SimpleXMLElement('&lt;xml/&gt;');
		$control = $xml-&gt;addChild('control');

		foreach ($this-&gt;settings as $key =&gt; $value) {

			$control-&gt;addChild($key, $value);


		}

		fwrite( $confFile, $xml-&gt;toXml() );
		fclose( $confFile );


	}

	/**
	 * Allows the class settings to be overwritten en-masse 
	 * externally by providing a new map.
	 *
	 * @param $map - the new settings array to use
	 */
	public function setConfig( $map ){
		$this-&gt;settings = $map;
	}

	/**
	 * Returns requested fields from the settings 
	 * array.
	 *
	 * @param $field - the name of the item to return
	 * @return the item
	 */
	public function __get( $field ){
		return $this-&gt;settings[$field];
	}

}

?&gt;</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all()
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>