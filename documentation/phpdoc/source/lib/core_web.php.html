<html>
    <head>
        <script
            type="text/javascript"
            src="../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php
/**
 * 
 * Contains functions for basic web capabilities such as reading
 * variables from the URL (safely), setting/getting cookies and config
 * options.
 * @author Nate Levesque &lt;public@thenaterhood.com&gt;
 * @copyright Nate Levesque 2013
 * Language: PHP
 * Filename: core_web.php
 * 
 */

/**
 * Include the config file
 */
include GNAT_ROOT.'/config/class_config.php';
include GNAT_ROOT.'/classes/class_varGetter.php';
include GNAT_ROOT.'/classes/class_session.php';
include GNAT_ROOT.'/classes/class_lock.php';
include GNAT_ROOT.'/lib/core_extension.php';
include GNAT_ROOT.'/classes/class_article.php';
include GNAT_ROOT.'/classes/class_urlHandler.php';

/**
* Checks to see if the preferred file exists, and if it does
* returns it, otherwise it returns the secondary file, which ideally
* should be a file (like an error page) that is guaranteed to exist.
* 
* @param $preferred (string): the preferred page to include
* 
* 
*/
function pullContent($preferred, $sectionUri='/', $articleUri='/' ){

	$i = 0;
	$article = new article( &quot;&quot;, $sectionUri, $articleUri );

	while ( $i &lt; count($preferred) &amp;&amp; $article-&gt;getType() == &quot;none&quot; ){

		if ( !strpos( $preferred[$i], '.' ) ){

			$file = $preferred[$i];

		}
		else{
			$file = substr( $preferred[$i], 0, strpos( $preferred[$i], '.')-1);
		}

		$article = new article( $file, $sectionUri, $articleUri );

		$i++;

	}

	return $article;
}

/**
* Checks to see if the preferred file exists, and if it does
* returns it, otherwise it returns the secondary file, which ideally
* should be a file (like an error page) that is guaranteed to exist.
* 
* @param $preferred (string): the preferred page to include
* @param $secondary (string): the secondary, emergency page to include
* 
* THIS IS A FUNCTION TO SUPPORT LEGACY INDEX
*/
function getContent($preferred, $secondary){

	// Set up a default state, using the secondary.
	// Note that the secondary will not currently be searched
	// for, so must include an extension. It is assumed
	// it will be includable and will exist. If not, woe is you.
	$file = $secondary;
	$type = 'php';

	// If no file extension was given, initiate a search
	// for the file
	if ( !strpos( $preferred, '.' ) ){

		// Types supported by the class, in order of precedence
		$supportedTypes = array( 'php', 'html', 'pre' );
		$contentFile = 'NULL';

		// Search for the file in order of precedence
		$i = 0;
		while ( $i &lt; count($supportedTypes) &amp;&amp; !file_exists( $contentFile ) ){

			// If the file exists, update the class with it and break
			if ( file_exists( $preferred.'.'.$supportedTypes[$i] ) ){
				$contentFile = $preferred.'.'.$supportedTypes[$i];
				$file = $contentFile;
				$type = $supportedTypes[$i];
			}

			++$i;

		}

	}
	else{
		if ( file_exists( $preferred ) ){
			$type = substr( $preferred, strpos( $preferred, '.')+1 );
			$file = $preferred;
		}
	}

	$r = array();
	$r['file'] = $file;
    // If the file may contain php, then simply include the file
	if ( $type == &quot;php&quot; || $type == &quot;html&quot; ){

		$r['pre'] = &quot;&quot;;
		$r['post'] = &quot;&quot;;
		$r['sanitize'] = False;

	}

	// If the file is of type pre (preformatted), insert the
	// tags and sterilize the contents
	else if ( $type == &quot;pre&quot; ){

		$r['pre'] = '&lt;pre&gt;';
		$r['post'] = '&lt;/pre&gt;';
		$r['sanitize'] = True;
		
	}

	return $r;
}

function chooseInclude( $preferred, $secondary ){

	$contentInstructions = getContent( $preferred, $secondary );
	return $contentInstructions['file'];

}

/**
* Displays a string with a random greeting and the string
* the function was called with.
* 
* @param $first_name (str): a string, preferably a name
* 
* @return - a string with a personal greeting
*/
function randomGreeting($first_name){

	$greetings = array(&quot;Howdy&quot;, &quot;Hello&quot;, &quot;Hi&quot;, &quot;Hey there&quot;, &quot;Hi there&quot;, &quot;Greetings&quot;, &quot;Hiya&quot;);
	return $greetings[ array_rand($greetings) ].&quot;, $first_name&quot;;
	
}

/**
 * Built to abstract retrieving config variables, since
 * they're now contained in a class this is just for legacy
 * support until everything else gets moved off
 * of using this function
 * 
 * @param $key - the name of a config key to retrieve
 * 
 * @return - the value of the config key
 */
function getConfigOption($key){
	
	$CONFIG = new config();
	return $CONFIG-&gt;$key;
}
	

?&gt;
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all()
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>